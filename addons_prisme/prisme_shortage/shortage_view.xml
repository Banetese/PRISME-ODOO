<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>
	<record id="wizard_prisme_shortage" model="ir.ui.view">
		<field name="name">prisme.shortage.wizard.tree</field>
		<field name="model">prisme.shortage.wizard</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
			<tree string="Shortable" colors="gray:state in ('actual');darkred:sign=='-';darkgreen:sign=='+';red:qtysum&lt;0">
				<field name="origin"/>
        			<field name="partner_id"/>
        			<field name="product_id"/>
        			<field name="product_qty"/>
					<field name="qtysum"/>
					<field name="qtysumshort"/>
        			<field name="location_id"/>
        			<field name="location_dest_id"/>
        			<field name="date"/>
        			<field name="state"/>
				<field name="sign" invisible="1" />
			</tree>
		</field>
	</record>
	<act_window 
		name="Product Shortage" 
		res_model="prisme.shortage.wizard" 
		src_model="product.product" 
		view_mode="tree"
		domain="[('create_uid','=',uid),]"
		context="{'product_id': 'active_id'}" 
		id="action_prisme_shortage_wizard" 
		groups="base.group_extended"
	/>
       <record id="all_prisme_shortage" model="ir.ui.view">
                <field name="name">prisme.shortage.all.tree</field>
                <field name="model">prisme.shortage.all</field>
                <field name="type">tree</field>
		<field name="priority" eval="1" />
                <field name="arch" type="xml">
			<tree string="Shortable for all products" colors="gray:state in ('actual');darkred:sign=='-';darkgreen:sign=='+';red:qtysum&lt;0">
                                <field name="origin"/>
                                <field name="partner_id"/>
                                <field name="product_id"/>
                                <field name="product_qty"/>
                                <field name="qtysum"/>
                                <field name="qtysumshort"/>
                                <field name="location_id"/>
                                <field name="location_dest_id"/>
                                <field name="date"/>
                                <field name="state"/>
                                <field name="sign" invisible="1" />
                        </tree>
		</field>
	</record>
	<record id="view_prisme_shortage_all_search" model="ir.ui.view">
  		<field name="name">prisme.shortage.all.search</field> 
  		<field name="model">prisme.shortage.all</field> 
  		<field name="type">search</field> 
  		<field eval="3" name="priority" /> 
 		<field name="arch" type="xml">
 			<search string="Products shortage">
 				<group>
  					<field name="origin" />
					<field name="partner_id" /> 
  					<field name="product_id" /> 
  					<field name="state" /> 
					<field name="date" />
 			 	</group>
  			</search>
                </field>
        </record>
        <record model="ir.actions.act_window" id="action_prisme_shortage_all">
                <field name="name">All product shortage</field>
                <field name="res_model">prisme.shortage.all</field>
		<field name="domain">[('create_uid', '=', uid),]</field>
		<field name="context">{'group_by':['product_id'],}</field> 
                <field name="view_type">form</field>
                <field name="view_mode">tree</field>
		<field name="view_id" ref="all_prisme_shortage" />
		<field name="search_view_id" ref="view_prisme_shortage_all_search" />
        </record>
        <menuitem
                id="menu_view_prisme_shortage_all"
                parent="stock.menu_stock_products_moves"
                name="All product shortage"
                action="action_prisme_shortage_all"
                icon="terp-graph"
                sequence="99"
        />

</data>
</openerp>
